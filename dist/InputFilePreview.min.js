var e,t,n,s=this&&this.__classPrivateFieldSet||function(e,t,n){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,n),n},a=this&&this.__classPrivateFieldGet||function(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)};export default class i extends HTMLInputElement{constructor(){super(),e.set(this,null),t.set(this,10485760),n.set(this,void 0),this.type="file"}connectedCallback(){const a=this.dataset.targetFor;if(void 0===a)throw new Error("Attribute: `data-target-for` is not set.");const i=document.getElementById(a);if(null===i)throw new Error(`Element: #${a} can not found.`);s(this,e,i);const r=this.dataset.maxSize;void 0!==r&&s(this,t,Number(r));const o=this.dataset.errorMessage;if(void 0===o)throw new Error("Attribute: `data-error-message` is not set.");s(this,n,o),this.addEventListener("change",this._changeEvent,{passive:!0})}disconnectedCallback(){this.removeEventListener("change",this._changeEvent)}_changeEvent(){const s=a(this,e);if(s.hasChildNodes())for(;null!==s.firstChild;)s.firstChild.remove();const i=this.files;if(null!==i)for(const e of i){const i=e.name,r=e.size,[o]=e.type.split("/",2);let c;switch(s.tagName.toLowerCase()){case"ol":case"ul":{const e=document.createElement("li");s.appendChild(e),c=e;break}default:c=s}if(r>a(this,t)||!["image","audio","video"].includes(o)){c.insertAdjacentHTML("beforeend",this._convertMessage(a(this,n),e));continue}const l=new FileReader;l.readAsDataURL(e),l.addEventListener("load",(()=>{const e=l.result;if(null===e)throw new Error("File load failed.");switch(o){case"image":{const t=document.createElement("img");t.src=e,t.alt=i,c.appendChild(t);break}case"audio":{const t=document.createElement("audio");t.src=e,t.controls=!0,t.textContent=i,c.appendChild(t);break}case"video":{const t=document.createElement("video");t.src=e,t.controls=!0,t.textContent=i,c.appendChild(t);break}}}))}}_convertMessage(e,t){return e.replace(/\$\{name\}/g,this._escapeHtml(t.name)).replace(/\$\{size\}/g,String(t.size))}_escapeHtml(e){return e.replace(/[&<>"']/g,(e=>{const t=new Map([["&","&amp;"],["<","&lt;"],[">","&gt;"],['"',"&quot;"],["'","&#39;"]]).get(e);return void 0===t?e:t}))}}e=new WeakMap,t=new WeakMap,n=new WeakMap;
//# sourceMappingURL=InputFilePreview.min.js.map